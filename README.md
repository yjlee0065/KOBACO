# 시청률 조사 데이터의 신뢰성 검증 및 편집 규칙 구현
> **미터기 원시 로그 데이터 분석을 통한 시청 기록 데이터 파이프라인 검증**

본 프로젝트는 시청률 조사 기관(Nielsen Korea)에서 수집되는 미터기 기반의 가구 시청 원시 데이터가 편집규칙을 통해 통계적 유효성을 갖춘 데이터로 변환되는 과정을 독립적으로 재구현하고 검증하기 위해 수행되었습니다. 데이터 전처리 로직과 4가지 핵심 편집 규칙을 알고리즘화하여 실제 변환 데이터와의 정합성을 분석하고, 데이터 누락 및 판정 오류 사례를 규명함으로써 데이터 품질 개선 근거를 마련했습니다.

---

<br>

## 1. 프로젝트 개요
* **분석 대상**: 2024년 9월 15일부터 9월 22일까지 일주일간의 패널 가구 시청 기록
* **핵심 분석**:
    - 초 단위 로그 데이터의 전처리 및 분 단위 데이터 정형화 로직 구현
    - 4가지 주요 편집 규칙(Uncovered Viewing, Constant Viewing 1&2) 적용
    - 연구진 구현 결과와 조사기관 변환 데이터 간의 정합성 비교 및 오류 패턴 분석

<br>

## 2. 사용 데이터 및 기술 스택
* **사용 데이터 (Data)**: 
    - **미터기 원시 데이터**: 가구원 입/퇴장, 채널 변경, 플랫폼 정보 등이 담긴 초 단위 텍스트 로그
    - **TX3 데이터**: 조사기관의 편집 규칙이 적용되어 변환된 분석용 표준 데이터
* **기술 스택 (Tech Stack)**:
    - **Language**: `R`
    - **Library**:
        - **Data Manipulation**: `dplyr`, `stringr` (정규표현식 기반 로그 파싱)
        - **Time Series**: `lubridate`, `hms` (시간 구간 연산 및 단위 변환)

<br>

## 3. 주요 분석 프로세스
### 1) 데이터 전처리
- 정규표현식을 활용하여 비정형 텍스트 로그에서 가구ID, 시청시간, 액션(입/퇴장), 채널번호 등을 추출
- 30초 이내의 반복적 입/퇴장 기록 병합 및 가구원 없이 게스트만 시청한 가구 제거
- 1초 단위 미터기 데이터를 30초 반올림 기준의 1분 단위(TX3 형식)로 재정의하여 분석 표준 규격화

### 2) 편집 규칙(Validation Rule) 알고리즘 구현
- **Uncovered Viewing**: 전체 TV 시청 시간 중 리모컨 조작이 없는 시간이 특정비율을 초과하는 부적격 가구/구간 식별 및 배제
- **Constant Viewing 1**: 동일 가구원이 한 채널을 이동 없이 특정 시간 이상 연속 시청한 비정상 기록 제거
- **Constant Viewing 2**: 수면 시간대의 동일 채널 무변동 시청 기록 필터링

### 3) 정합성 검증 및 품질 분석
- 연구진이 직접 구현한 데이터와 조사기관의 TX3 데이터를 비교하여 매칭률 산출
- 시작/종료 시각 불일치, 채널 매핑 오류, 부당 리젝 사례 등 5가지 주요 오류 패턴 분류 및 원인 분석

<br>

## 4. 핵심 인사이트 및 성과
- **데이터 품질 저하 요인 규명**: 조사기관 데이터에서 정상 시청 기록이 누락되거나, 유효하지 않은 채널 코드가 매핑되는 로직 구현 오류 사례 다수 발견
- **데이터 기반 개선안 제시**: VOD(Playback) 시청과 실시간 시청 로그의 명확한 구분 및 채널 코드 관리 시스템 개선 필요성 제언

<br>

## 5. 분석 결과 예시 (정합성 비교)
| 날짜 | 매칭 성공 기록(Matching Rows) | 시작시각 불일치 | 종료시각 불일치 | 채널코드 불일치 |
| :---: | :---: | :---: | :---: | :---: |
| **09/15** | 77,770건 | 1,274건 | 127건 | 899건 |
| **09/16** | 76,043건 | 1,338건 | 139건 | 797건 |
| **09/17** | 83,817건 | 1,314건 | 106건 | 931건 |

<br>

## 6. 프로젝트 성과 및 기대효과
- **데이터 신뢰성 확보**: 엄격한 편집 규칙 적용을 통해 광고주 및 방송사가 신뢰할 수 있는 시청률 지표 산출 근거 마련
- **검증 프로세스 자동화**: 수작업 검토를 대체하는 코드 기반 자동 검증 시스템 구축으로 데이터 품질 관리 효율성 극대화
- **비즈니스 의사결정 지원**: 정확한 데이터 정제 로직을 바탕으로 방송 산업 전반의 신뢰도 높은 기초 자료 제공
