# [Project] 시청률 조사 데이터의 신뢰성 검증 및 편집 규칙(Validation Rule) 엔진 구현
> **미터기 원시 로그 데이터 분석을 통한 시청 기록 데이터 파이프라인 검증 및 알고리즘화**

[cite_start]본 프로젝트는 시청률 조사 기관(Nielsen Korea)에서 수집되는 미터기 기반의 가구 시청 원시 데이터(Raw Log)가 통계적 유효성을 갖춘 데이터(TX3)로 변환되는 과정을 독립적으로 재구현하고 검증하기 위해 수행되었습니다[cite: 1, 4]. [cite_start]데이터 전처리 로직과 4가지 핵심 편집 규칙을 알고리즘화하여 실제 변환 데이터와의 정합성을 분석하고, 데이터 누락 및 판정 오류 사례를 규명함으로써 데이터 품질 개선 근거를 마련했습니다[cite: 5, 34].

---

<br>

## 1. 프로젝트 개요
* [cite_start]**분석 대상**: 2024년 9월 15일부터 9월 22일까지 일주일간의 패널 가구 시청 기록 [cite: 56, 91]
* **핵심 분석**:
    - [cite_start]초 단위 로그 데이터의 전처리 및 분 단위 데이터 정형화 로직 구현 [cite: 92, 160]
    - [cite_start]**Validation Rule Engine** 구축: 4가지 주요 편집 규칙(Uncovered Viewing, Constant Viewing 1&2, Time Error) 적용 [cite: 36]
    - [cite_start]연구진 구현 결과와 조사기관 변환 데이터 간의 **정합성 비교 및 오류 패턴 분석** [cite: 66, 222]

<br>

## 2. 사용 데이터 및 기술 스택
* **사용 데이터 (Data)**: 
    - [cite_start]**미터기 원시 데이터**: 가구원 입/퇴장, 채널 변경, 플랫폼 정보 등이 담긴 초 단위 텍스트 로그 [cite: 11, 151]
    - [cite_start]**TX3 데이터**: 조사기관의 편집 규칙이 적용되어 변환된 분석용 표준 데이터 [cite: 13, 124]
    - [cite_start]**채널 리스트**: 채널 번호(Chn)와 아리아나(Ariana) 고유 코드 매핑 정보 [cite: 82, 180]
* **기술 스택 (Tech Stack)**:
    - **Language**: `R`
    - **Library**:
        - **Data Manipulation**: `dplyr`, `stringr` (정규표현식 기반 로그 파싱) [1_MET.R]
        - **Time Series**: `lubridate`, `hms` (시간 구간 연산 및 단위 변환) [1_MET.R]

<br>

## 3. 주요 분석 프로세스
### 1) 데이터 전처리 파이프라인 구축 (ETL)
- [cite_start]**Log Parsing**: 정규표현식을 활용하여 비정형 텍스트 로그에서 가구ID, 시청시간, 액션(입/퇴장), 채널번호 등을 추출 [cite: 150, 153]
- [cite_start]**Noise Filtering**: 30초 이내의 반복적 입/퇴장 기록 병합 및 가구원 없이 게스트만 시청한 가구 제거 [cite: 155, 157]
- [cite_start]**Standardization**: 1초 단위 미터기 데이터를 30초 반올림 기준의 1분 단위(TX3 형식)로 재정의하여 분석 표준 규격화 [cite: 160, 162, 164]

### 2) 핵심 편집 규칙(Validation Rule) 알고리즘 구현
- [cite_start]**Uncovered Viewing**: 전체 TV 시청 시간 중 리모컨 조작이 없는 시간이 50%를 초과하는 부적격 가구/구간 식별 및 배제 [cite: 25, 38]
- [cite_start]**Constant Viewing 1**: 동일 가구원이 한 채널을 이동 없이 12시간 이상 연속 시청한 비정상 기록 제거 [cite: 31, 43]
- [cite_start]**Constant Viewing 2**: 수면 시간대(새벽 02~06시)의 동일 채널 무변동 시청 기록 필터링 [cite: 31, 47]
- [cite_start]**Time Error**: 서버와 미터기 간 시간 오차(5분 이상) 발생 구간의 데이터 일관성 검토 [cite: 23, 50]

### 3) 정합성 검증 및 품질 분석
- [cite_start]**Cross-Validation**: 연구진이 직접 구현한 데이터와 조사기관의 TX3 데이터를 Join하여 매칭률 산출 [cite: 221]
- [cite_start]**Error Root Cause Analysis**: 시작/종료 시각 불일치, 채널 매핑 오류, 부당 리젝 사례 등 5가지 주요 오류 패턴 분류 및 원인 분석 [cite: 223, 238]

<br>

## 4. 핵심 인사이트 및 성과
- [cite_start]**데이터 품질 저하 요인 규명**: 조사기관 데이터에서 정상 시청 기록이 누락되거나, 유효하지 않은 채널 코드가 매핑되는 로직 구현 오류 사례 다수 발견 [cite: 241, 247, 264]
- [cite_start]**데이터 기반 개선안 제시**: VOD(Playback) 시청과 실시간 시청 로그의 명확한 구분 및 아리아나 코드 관리 시스템 개선 필요성 제언 [cite: 282, 287, 301]
- [cite_start]**복잡 비즈니스 로직 구현 역량**: 대규모 비정형 로그 데이터를 정밀한 통계 규칙에 따라 정형화하고 검증하는 데이터 엔지니어링 프로세스 완수 [cite: 66, 276]

<br>

## 5. 분석 결과 예시 (정합성 비교)
| 날짜 | 매칭 성공 기록(Matching Rows) | 시작시각 불일치 | 종료시각 불일치 | 채널코드 불일치 |
| :---: | :---: | :---: | :---: | :---: |
| **09/15** | [cite_start]77,770건 [cite: 221] | [cite_start]1,274건 [cite: 221] | [cite_start]127건 [cite: 221] | [cite_start]899건 [cite: 221] |
| **09/16** | [cite_start]76,043건 [cite: 221] | [cite_start]1,338건 [cite: 221] | [cite_start]139건 [cite: 221] | [cite_start]797건 [cite: 221] |
| **09/17** | [cite_start]83,817건 [cite: 221] | [cite_start]1,314건 [cite: 221] | [cite_start]106건 [cite: 221] | [cite_start]931건 [cite: 221] |

<br>

## 6. 프로젝트 성과 및 기대효과
- [cite_start]**데이터 신뢰성 확보**: 엄격한 편집 규칙 적용을 통해 광고주 및 방송사가 신뢰할 수 있는 시청률 지표 산출 근거 마련 [cite: 14, 34]
- [cite_start]**검증 프로세스 자동화**: 수작업 검토를 대체하는 코드 기반 자동 검증 시스템 구축으로 데이터 품질 관리 효율성 극대화 [cite: 63, 145]
- [cite_start]**비즈니스 의사결정 지원**: 정확한 데이터 정제 로직을 바탕으로 방송 산업 전반의 신뢰도 높은 기초 자료 제공 [cite: 17, 55]
